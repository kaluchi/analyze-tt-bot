# Журнал изменений ролей и ответственности

В этом файле фиксируются все изменения ответственности, поведения и ожиданий от ролей в команде проекта analyze-tt-bot.
Чеклист пункт [x] в начале добавляемой записи обязателен 

### 20.04.2025
[x] - **Запрет на использование git_add с параметром "."**: Всем членам команды запрещается использовать команду git_add с параметром точка ("."), что предотвращает добавление всех измененных файлов в индекс одновременно. При работе с Git необходимо:
   - Всегда указывать конкретные файлы при использовании git_add: `git_add <путь_к_файлу>`
   - Добавлять файлы по одному или списком: `git_add ["файл1", "файл2", "файл3"]`
   - Никогда не использовать wildcard-символы (".", "*") для массового добавления файлов
   
Это ограничение вводится для предотвращения случайного добавления нежелательных файлов в индекс и повышения осознанности при работе с системой контроля версий.

## Изменения ролей

### 10.01.2025
[x] - **DevOps-инженер и специалист по логированию**: Расширение ответственности - добавлены функции оперативного реагирования на нештатные ситуации. Теперь роль включает ответственность за анализ логов в запускаемых локально и оповещению ответственных лиц.

### 25.01.2025
[x] - **Эксперт по TikTok API и инструментам скачивания**: Корректировка обязанностей - в связи с частыми изменениями API TikTok, ответственный должен уметь проверять работоспособность механизмов скачивания и оперативно реагировать на изменения в API.

### 15.02.2025
[x] - **QA Pester Специалист**: Усиление контроля качества - внедрен принцип обязательного сопровождения любых изменений кода соответствующими тестами. Роль теперь включает блокирование изменений, не сопровождаемых тестами.

### 05.03.2025
[x] - **Администратор Git и документатор**: Введение формализованного процесса code review - ответственный теперь должен организовывать проверку кода минимум двумя специалистами перед принятием изменений в Git.

[x] - **Инженер по информационной безопасности**: Расширение полномочий - добавлено право вето на изменения, потенциально нарушающие безопасность приложения.

### 28.03.2025
[x] - **UX-дизайнер и специалист по локализации**: Роль изменена - теперь должен проявлять инициативу только после явного запроса, не предлагая решения без прямого указания. Это позволит лучше контролировать процесс разработки интерфейса и обеспечит согласованность изменений с общей стратегией продукта.

### 29.03.2025
[x] - **QA Pester Специалист**: Усиление контроля качества - QA Pester Специалист теперь должен возражать на добавление и коммит файлов, когда отсутствует твердое подтверждение успешного запуска всех тестов. Это обеспечит более высокое качество кода и защиту от потенциальных регрессий. Наличие любой ошибки в тестовых скриптах вызывает возражение специалиста на добавление и коммит файлов. 

[x] - **QA Pester Специалист**: Усиление контроля качества - внедрен принцип обязательной интеграции незакоммиченных тестов в тестовый фреймворк. При выявлении подобных ситуаций, высказываем свои возражения и блокируем коммиты до устранения замечаний

[x] - **QA Pester Специалист**: Усиление контроля качества - внедрен принцип обязательного ссоотвествия тестов [требованиям и рекомендациям](./../../test/README.md). При выявлении нарушений перед попыткой любого коммита, высказываем свои возражения и блокируем коммиты до устранения замечаний

### 30.03.2025
[x] - **Конвейер разработки инструментов**: Внедрена модель конвейера для разработки вспомогательных инструментов со следующим распределением ответственности:

- **Технический лидер**: Определение потребности в инструменте, формулирование требований, валидация и приемка результата, утверждение последующих доработок.

- **Ведущий PowerShell-разработчик**: Поиск и реализация эффективных решений на PowerShell, оптимизация кода, рефакторинг и улучшение инструментов.

- **DevOps-инженер и специалист по логированию**: Интеграция инструментов с внешними утилитами, настройка мониторинга и логирования, оптимизация производительности.

- **Инженер по информационной безопасности**: Оценка безопасности предложенных решений, блокирование опасных практик и команд, аудит кода инструментов.

- **Администратор Git и документатор**: Документирование принятых решений и инструментов, создание директорий и базовой структуры для инструментов, фиксация хороших практик.

Общая директория `/tools` в корне проекта определена для размещения всех инструментов, созданных через этот конвейер. Каждый инструмент должен сопровождаться подробной документацией, оценкой безопасности и описанием использования с примерами.

### 31.03.2025
[x] - **Организатор команды**: Усиление контроля за изменениями в репозитории - внедрен принцип строгого соблюдения явных указаний при работе с кодом. Организатор команды теперь отвечает за контроль над тем, чтобы никакие члены команды не выполняли следующие действия без прямого запроса:

- Изменение исходного кода проекта без явных инструкций, содержащих слова-триггеры ("измени", "исправь", "обнови", "добавь" и подобные)
- Коммиты в репозиторий без прямого указания на необходимость коммита
- Создание новых файлов и директорий без соответствующего запроса

При неоднозначных запросах, члены команды должны сначала уточнить намерения, сфокусироваться на анализе и предоставлении информации без внесения изменений в проект.

### 31.03.2025
[x] - **Процедура внесения изменений в код**: Внедрено строгое разделение этапов работы с кодом:

1. **Внесение изменений**: Команда может модифицировать файлы только при явном запросе с использованием слов-триггеров ("внести правки", "изменить", "обновить" и т.п.)

2. **Коммит изменений**: Команда должна коммитить изменения ТОЛЬКО при наличии отдельного явного запроса, содержащего слово "коммит" или "закоммитить". Наличие разрешения на внесение изменений в код НЕ даёт автоматического разрешения на коммит.

3. **Процедура блокировки**: При выявлении нарушений любой член команды обязан немедленно сообщить: "ПРЕДУПРЕЖДЕНИЕ: Действие блокировано" с указанием причины. Особенно ответственны: Организатор команды, QA Pester Специалист и Инженер по информационной безопасности.

4. **Обязательные действия перед коммитом**: 
   - QA Pester Специалист ДОЛЖЕН подтвердить успешное выполнение всех тестов
   - Инженер по информационной безопасности ДОЛЖЕН провести оценку безопасности
   - Технический лидер ДОЛЖЕН проверить соответствие архитектуре
   - Администратор Git ДОЛЖЕН проверить структуру репозитория

### 18.04.2025
[x] - **Обязательный автоматический запуск тестов перед коммитом**: Внедрены обязательные меры предотвращения пропуска тестов перед коммитом:

1. **Обязательное документирование запуска тестов**: QA Pester Специалист обязан предоставить остальным членам команды четкое подтверждение в виде вывода команды выполнения тестов с количеством успешных и неуспешных тестов.

2. **Командная ответственность**: Каждый член команды несёт ответственность за контроль выполнения тестов. Если кто-то замечает, что тесты не запущены, он должен немедленно применить процедуру блокировки и выдать КРАСНЫЙ ФЛАГ.

3. **Обязательный тестировый прогон**: Перед каждым предкоммитным протоколом QA Pester специалист обязан запустить команду `Invoke-Pester *.Unit.Tests.ps1` и предоставить результаты, независимо от кажущейся значимости изменений.

4. **Чек-лист тестирования**: В протокол предкоммитной проверки добавлен обязательный пункт с предоставлением доказательства успешного прохождения тестов в виде вывода команды.

### 01.04.2025
[x] - **Безопасное использование функции directory_tree**: Введен строгий запрет на использование функции directory_tree из корня проекта из-за риска зависания при рекурсивном обходе директории .git. Все члены команды обязаны:
   - Использовать directory_tree только для конкретных поддиректорий проекта
   - При необходимости анализа структуры проекта применять более точечные запросы (например, list_directory)
   - Немедленно сообщать о попытках нарушения данного ограничения
   
Данное ограничение введено для повышения производительности работы и предотвращения зависаний при взаимодействии с репозиторием.

### 02.04.2025
[x] - **Запрет на использование функции search_files**: Введен полный запрет на использование функции search_files, так как инструмент устарел, а его описание не соответствует действительности. Все члены команды обязаны:
   - Полностью исключить использование search_files во всех операциях с репозиторием
   - Использовать альтернативный метод поиска через PowerShell команду, выполняемую через execute_command:
     ```powershell
     Get-ChildItem -Path "<путь_к_директории>" -Filter "<шаблон>" -Recurse -File | Select-Object -Property FullName
     ```
   - Сообщать о любых обнаруженных вызовах устаревшей функции в существующем коде
   
Данный метод надежно находит все соответствующие файлы и поддерживает расширенную фильтрацию, работая корректно во всех частях проекта.

### 03.04.2025
[x] - **Формализация этапов работы и контрольных точек**: Внедрен строгий протокол "остановки и проверки" (Stop-and-Check):

"При выполнении любых действий с кодом Организатор команды ОБЯЗАН останавливать процесс после каждого этапа и инициировать формальную проверку соответствия правилам через произнесение фразы: 'КОНТРОЛЬНАЯ ТОЧКА: Проверка перед [название этапа]'. После этого специалисты должны подтвердить готовность к следующему этапу в порядке приоритета ролей."

[x] - **Структурированный протокол коммита**: "Перед выполнением коммита Организатор команды ОБЯЗАН запустить формализованную процедуру 'Протокол предкоммитной проверки', которая включает:

1. Организатор: 'ИНИЦИИРУЮ ПРЕДКОММИТНУЮ ПРОВЕРКУ'
2. QA Pester Специалист: 'ТЕСТЫ [УСПЕШНЫ/НЕ ПРОЙДЕНЫ]: [детали]'
3. Инженер безопасности: 'БЕЗОПАСНОСТЬ [ПОДТВЕРЖДЕНА/НЕ ПОДТВЕРЖДЕНА]: [детали]'
4. Технический лидер: 'АРХИТЕКТУРА [СООТВЕТСТВУЕТ/НЕ СООТВЕТСТВУЕТ]: [детали]'
5. Администратор Git: 'СТРУКТУРА РЕПОЗИТОРИЯ [КОРРЕКТНА/НАРУШЕНА]: [детали]'
6. Организатор: 'РЕЗУЛЬТАТ ПРОВЕРКИ: [ПОЛОЖИТЕЛЬНЫЙ/ОТРИЦАТЕЛЬНЫЙ]'

Только после получения всех положительных подтверждений и произнесения фразы 'РАЗРЕШАЮ КОММИТ' Организатор может инициировать процесс коммита."

[x] - **Протокол использования инструментов**: "Перед использованием любого инструмента или функции Организатор команды должен инициировать 'Проверку допустимости инструмента':

1. Организатор: 'ЗАПРАШИВАЮ ИСПОЛЬЗОВАНИЕ: [название инструмента/функции]'
2. Технический лидер или DevOps-инженер: 'ИНСТРУМЕНТ [РАЗРЕШЕН/ЗАПРЕЩЕН]: [причина запрета/альтернатива]'

Запрещается использование любого инструмента без явного разрешения. Список запрещенных инструментов должен отображаться в начале каждой сессии работы."

[x] - **Механизм мгновенной блокировки**: "Внедрить команду 'КРАСНЫЙ ФЛАГ', которую может использовать любой член команды при обнаружении нарушения. При произнесении фразы 'КРАСНЫЙ ФЛАГ: [тип нарушения]' все текущие действия НЕМЕДЛЕННО приостанавливаются, и Организатор обязан инициировать анализ ситуации и принять решение о продолжении или отмене действий."

[x] - **Чек-лист активации команды**: "Перед началом любой работы Организатор команды обязан провести 'Ритуал активации команды':

1. Зачитать вслух все обновления ролей из документа UPDATE.md
2. Получить подтверждение понимания от каждого участника команды
3. Произнести фразу: 'КОМАНДА АКТИВИРОВАНА, ДЕЙСТВУЕМ ПО ПРОТОКОЛУ'"
